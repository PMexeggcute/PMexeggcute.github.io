<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="ä»€ä¹ˆæ˜¯ä»»åŠ¡åœ¨ FreeRTOS ä¸­ï¼Œä»»åŠ¡ï¼ˆTaskï¼‰æ˜¯å†…æ ¸è°ƒåº¦çš„åŸºæœ¬æ‰§è¡Œå•ä½ã€‚ å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç‹¬ç«‹è¿è¡Œçš„å‡½æ•°ï¼Œå¹¶ä¸”æ‹¥æœ‰è‡ªå·±çš„è¿è¡Œç¯å¢ƒã€‚ FreeRTOS ä¸ºæ¯ä¸ªä»»åŠ¡åˆ†é…ä¸¤å—ç‹¬ç«‹çš„å†…å­˜ï¼š  TCBï¼ˆTask Control Blockï¼‰ï¼šä¿å­˜ä»»åŠ¡çš„å…ƒä¿¡æ¯ï¼Œä¾‹å¦‚ä¼˜å…ˆçº§ã€çŠ¶æ€ã€ä¸Šä¸‹æ–‡æŒ‡é’ˆç­‰ã€‚ ä»»åŠ¡æ ˆï¼ˆStackï¼‰ï¼šä¿å­˜æ­¤ä»»åŠ¡çš„å±€éƒ¨å˜é‡ã€å‡½æ•°è°ƒç”¨ç°åœºå’Œå¯„å­˜å™¨ä¸Šä¸‹æ–‡ã€‚  ä»»åŠ¡ä¹‹é—´çš„æ ˆç©ºé—´ç›¸äº’ç‹¬ç«‹ï¼Œå› æ­¤æ¯ä¸ªä»»">
<meta property="og:type" content="article">
<meta property="og:title" content="FreeRTOSå­¦ä¹ ç¬”è®°(ä¸€) ä»»åŠ¡ç®¡ç†">
<meta property="og:url" content="http://example.com/2025/12/03/FreeRTOS(%E4%B8%80)/index.html">
<meta property="og:site_name" content="Sn0r1ax">
<meta property="og:description" content="ä»€ä¹ˆæ˜¯ä»»åŠ¡åœ¨ FreeRTOS ä¸­ï¼Œä»»åŠ¡ï¼ˆTaskï¼‰æ˜¯å†…æ ¸è°ƒåº¦çš„åŸºæœ¬æ‰§è¡Œå•ä½ã€‚ å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç‹¬ç«‹è¿è¡Œçš„å‡½æ•°ï¼Œå¹¶ä¸”æ‹¥æœ‰è‡ªå·±çš„è¿è¡Œç¯å¢ƒã€‚ FreeRTOS ä¸ºæ¯ä¸ªä»»åŠ¡åˆ†é…ä¸¤å—ç‹¬ç«‹çš„å†…å­˜ï¼š  TCBï¼ˆTask Control Blockï¼‰ï¼šä¿å­˜ä»»åŠ¡çš„å…ƒä¿¡æ¯ï¼Œä¾‹å¦‚ä¼˜å…ˆçº§ã€çŠ¶æ€ã€ä¸Šä¸‹æ–‡æŒ‡é’ˆç­‰ã€‚ ä»»åŠ¡æ ˆï¼ˆStackï¼‰ï¼šä¿å­˜æ­¤ä»»åŠ¡çš„å±€éƒ¨å˜é‡ã€å‡½æ•°è°ƒç”¨ç°åœºå’Œå¯„å­˜å™¨ä¸Šä¸‹æ–‡ã€‚  ä»»åŠ¡ä¹‹é—´çš„æ ˆç©ºé—´ç›¸äº’ç‹¬ç«‹ï¼Œå› æ­¤æ¯ä¸ªä»»">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/images/FreeRTOS/0.png">
<meta property="og:image" content="http://example.com/images/FreeRTOS/1.png">
<meta property="og:image" content="http://example.com/images/FreeRTOS/2.png">
<meta property="og:image" content="http://example.com/images/FreeRTOS/3.png">
<meta property="og:image" content="http://example.com/images/FreeRTOS/4.png">
<meta property="og:image" content="http://example.com/images/FreeRTOS/5.png">
<meta property="og:image" content="http://example.com/images/FreeRTOS/6.png">
<meta property="og:image" content="http://example.com/images/FreeRTOS/7.png">
<meta property="article:published_time" content="2025-12-03T12:07:37.155Z">
<meta property="article:modified_time" content="2025-12-08T07:36:57.417Z">
<meta property="article:author" content="Sn0r1ax">
<meta property="article:tag" content="å­¦ä¹ ç¬”è®°">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/images/FreeRTOS/0.png">

<link rel="canonical" href="http://example.com/2025/12/03/FreeRTOS(%E4%B8%80)/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>FreeRTOSå­¦ä¹ ç¬”è®°(ä¸€) ä»»åŠ¡ç®¡ç† | Sn0r1ax</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Sn0r1ax</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Sleep all day</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/12/03/FreeRTOS(%E4%B8%80)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.png">
      <meta itemprop="name" content="Sn0r1ax">
      <meta itemprop="description" content="ğŸ˜˜ğŸ˜˜ğŸ˜˜">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sn0r1ax">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          FreeRTOSå­¦ä¹ ç¬”è®°(ä¸€) ä»»åŠ¡ç®¡ç†
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2025-12-03 20:07:37" itemprop="dateCreated datePublished" datetime="2025-12-03T20:07:37+08:00">2025-12-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-12-08 15:36:57" itemprop="dateModified" datetime="2025-12-08T15:36:57+08:00">2025-12-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/" itemprop="url" rel="index"><span itemprop="name">åµŒå…¥å¼</span></a>
                </span>
                  ï¼Œ
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/FreeRTOS/" itemprop="url" rel="index"><span itemprop="name">FreeRTOS</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="ä»€ä¹ˆæ˜¯ä»»åŠ¡"><a href="#ä»€ä¹ˆæ˜¯ä»»åŠ¡" class="headerlink" title="ä»€ä¹ˆæ˜¯ä»»åŠ¡"></a>ä»€ä¹ˆæ˜¯ä»»åŠ¡</h2><p>åœ¨ FreeRTOS ä¸­ï¼Œ<strong>ä»»åŠ¡ï¼ˆTaskï¼‰æ˜¯å†…æ ¸è°ƒåº¦çš„åŸºæœ¬æ‰§è¡Œå•ä½</strong>ã€‚<br> å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç‹¬ç«‹è¿è¡Œçš„å‡½æ•°ï¼Œå¹¶ä¸”æ‹¥æœ‰è‡ªå·±çš„è¿è¡Œç¯å¢ƒã€‚</p>
<p>FreeRTOS ä¸ºæ¯ä¸ªä»»åŠ¡åˆ†é…ä¸¤å—ç‹¬ç«‹çš„å†…å­˜ï¼š</p>
<ul>
<li><strong>TCBï¼ˆTask Control Blockï¼‰</strong>ï¼šä¿å­˜ä»»åŠ¡çš„å…ƒä¿¡æ¯ï¼Œä¾‹å¦‚ä¼˜å…ˆçº§ã€çŠ¶æ€ã€ä¸Šä¸‹æ–‡æŒ‡é’ˆç­‰ã€‚</li>
<li><strong>ä»»åŠ¡æ ˆï¼ˆStackï¼‰</strong>ï¼šä¿å­˜æ­¤ä»»åŠ¡çš„å±€éƒ¨å˜é‡ã€å‡½æ•°è°ƒç”¨ç°åœºå’Œå¯„å­˜å™¨ä¸Šä¸‹æ–‡ã€‚</li>
</ul>
<p>ä»»åŠ¡ä¹‹é—´çš„æ ˆç©ºé—´ç›¸äº’ç‹¬ç«‹ï¼Œå› æ­¤æ¯ä¸ªä»»åŠ¡å¯ä»¥åƒâ€œå•ç‹¬è¿è¡Œâ€çš„ç¨‹åºä¸€æ ·æ‰§è¡Œè‡ªå·±çš„é€»è¾‘ã€‚</p>
<p>è™½ç„¶å•æ ¸ MCU åœ¨ä»»æ„æ—¶åˆ»åªèƒ½æ‰§è¡Œä¸€æ¡æŒ‡ä»¤ï¼Œä½† FreeRTOS é€šè¿‡<strong>ä¼˜å…ˆçº§è°ƒåº¦</strong>å’Œ<strong>å¿«é€Ÿçš„ä¸Šä¸‹æ–‡åˆ‡æ¢</strong>è®©å¤šä¸ªä»»åŠ¡â€œè½®æµè¿è¡Œâ€ï¼Œä»è€Œè¡¨ç°å‡ºç±»ä¼¼å¤šçº¿ç¨‹çš„æ•ˆæœã€‚</p>
<blockquote>
<p><strong>å› æ­¤ï¼Œä»»åŠ¡å¯ä»¥ç†è§£ä¸ºï¼šFreeRTOS ä¸­ç”±è°ƒåº¦å™¨ç®¡ç†çš„ç‹¬ç«‹æ‰§è¡Œå•å…ƒï¼Œæ˜¯æ•´ä¸ªç³»ç»Ÿä¸­æœ€å°çš„å¯è°ƒåº¦å¯¹è±¡ã€‚</strong></p>
</blockquote>
<p>ä¸€ä¸ªæœ€ç®€å•çš„ä»»åŠ¡é•¿è¿™æ ·</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">StartDefaultTask</span><span class="params">(<span class="type">void</span> *argument)</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">/* Infinite loop */</span></span><br><span class="line">  <span class="keyword">for</span>(;;)</span><br><span class="line">  &#123;</span><br><span class="line">      </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="ä»»åŠ¡çš„çŠ¶æ€æœºåŠå…¶ç”Ÿå‘½å‘¨æœŸ"><a href="#ä»»åŠ¡çš„çŠ¶æ€æœºåŠå…¶ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ä»»åŠ¡çš„çŠ¶æ€æœºåŠå…¶ç”Ÿå‘½å‘¨æœŸ"></a>ä»»åŠ¡çš„çŠ¶æ€æœºåŠå…¶ç”Ÿå‘½å‘¨æœŸ</h2><p>ä¸€ä¸ªä»»åŠ¡åŒ…å«å››ç§çŠ¶æ€, åˆšåˆ›å»ºæ—¶çš„<strong>å°±ç»ªæ€(Ready)</strong>, æ‰§è¡Œæ—¶çš„<strong>è¿è¡Œæ€(Runing)</strong>, é˜»å¡æ—¶çš„<strong>é˜»å¡æ€(Blocked)</strong>, æš‚åœæ—¶çš„<strong>æŒ‚èµ·æ€(Suspended)</strong></p>
<p>å½“ç„¶è¿˜æœ‰è¢«<strong>delete</strong>åçš„çŠ¶æ€, è¿™é‡Œä¸åˆ—å…¥å…¶ä¸­</p>
<h3 id="å¦‚ä½•åˆ›å»ºä¸€ä¸ªä»»åŠ¡"><a href="#å¦‚ä½•åˆ›å»ºä¸€ä¸ªä»»åŠ¡" class="headerlink" title="å¦‚ä½•åˆ›å»ºä¸€ä¸ªä»»åŠ¡"></a>å¦‚ä½•åˆ›å»ºä¸€ä¸ªä»»åŠ¡</h3><h4 id="å‡½æ•°å‚æ•°åŠè¿”å›å€¼"><a href="#å‡½æ•°å‚æ•°åŠè¿”å›å€¼" class="headerlink" title="å‡½æ•°å‚æ•°åŠè¿”å›å€¼"></a>å‡½æ•°å‚æ•°åŠè¿”å›å€¼</h4><p>FreeRTOSæä¾›äº†6ä¸ªapiå‡½æ•°ä¾›æˆ‘ä»¬ä½¿ç”¨, åˆ†åˆ«æ˜¯:</p>
<p><code>xTaskCreate(), xTaskCreateStatic(),xTaskCreateRestricted(), xTaskCreateRestrictedStatic(), xTaskCreateAffinitySet(), and xTaskCreateStaticAffinitySet()</code></p>
<p>å…¶ä¸­æœ€åŸºç¡€çš„æ˜¯<code>xTaskCreate()</code>, å‡½æ•°å®šä¹‰å¦‚ä¸‹:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">BaseType_t <span class="title function_">xTaskCreate</span><span class="params">( TaskFunction_t pvTaskCode,</span></span><br><span class="line"><span class="params"><span class="type">const</span> <span class="type">char</span> * <span class="type">const</span> pcName,</span></span><br><span class="line"><span class="params">configSTACK_DEPTH_TYPE usStackDepth,</span></span><br><span class="line"><span class="params"><span class="type">void</span> * pvParameters,</span></span><br><span class="line"><span class="params">UBaseType_t uxPriority,</span></span><br><span class="line"><span class="params">TaskHandle_t * pxCreatedTask )</span>;</span><br></pre></td></tr></table></figure>

<p>å¦å¤–æä¸€å˜´, FreeRTOSè¿™ä¸ªé¡¹ç›®ä½¿ç”¨çš„å‘½åæ–¹æ³•å¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§<strong>åŒˆç‰™åˆ©å‘½åæ³•çš„å˜ä½“</strong>, é€šè¿‡åœ¨å˜é‡åå‰åŠ â€™iâ€™, â€˜uâ€™ ä¹‹ç±»çš„å•è¯è¡¨ç¤ºå˜é‡çš„ç±»å‹</p>
<p>å¦‚uxPriority å°±æ˜¯æŒ‡çš„unsigned basetype (basetypeåœ¨ä¸åŒçš„æ¶æ„ä¸Šä½æ•°ä¸åŒ, å¦‚32ä½æ¶æ„ä¸‹æ˜¯32ä½, 64ä½ä¸‹åˆ™æ˜¯64ä½)</p>
<p>è¯è¯´å›æ¥, ä»‹ç»ä¸€ä¸‹å…¶ä¸­çš„å‚æ•°åŠè¿”å›å€¼</p>
<p><strong>å‚æ•°:</strong></p>
<ul>
<li>pvTaskCode: è¯¥å‚æ•°ä¸ºæŒ‡å‘ä»»åŠ¡çš„å‡½æ•°çš„æŒ‡é’ˆ</li>
<li>pcName: ç”¨äºè°ƒè¯•æ—¶æ˜¾ç¤ºçš„ä»»åŠ¡åç§°, å¯ç½®NULL, <code>configMAX_TASK_NAME_LEN</code>è®°å½•äº†å…¶æœ€å¤§é•¿åº¦</li>
<li>usStackDepth: ç”¨äºæŒ‡å®šåˆ†é…ç»™ä»»åŠ¡ä½¿ç”¨çš„å †æ ˆå¤§å°, è¯¥å€¼æŒ‡å®šçš„æ˜¯å †æ ˆå¯å®¹çº³çš„å­—èŠ‚æ•°, å³ å¦‚æœè¯¥å‚æ•°ä¸º128, åˆ™ä¼šåˆ†é…128 * 4 ä¸ªå­—èŠ‚çš„å †æ ˆç©ºé—´. <code>configSTACK_DEPTH_TYPE</code>è§„å®šäº†ç”¨äºä¿å­˜å †æ ˆå¤§å°çš„æ•°æ®ç±»å‹, é»˜è®¤ä¸º<code>uint16_t</code>, æ„å‘³ç€å¦‚æœå †æ ˆæ·±åº¦ä¹˜ä»¥å †æ ˆå®½åº¦å¤§äº65535æ—¶ä¼šå‘ç”Ÿæº¢å‡º</li>
<li>pvParameters: ç”¨äºç»™ä»»åŠ¡çš„å‚æ•°ä¼ å€¼</li>
<li>uxPriority: è¯¥ä»»åŠ¡çš„ä¼˜å…ˆçº§, èŒƒå›´ä¸º0åˆ°<code>configMAX_PRIORITIES - 1</code></li>
<li>pxCreatedTask: ç”¨äºå‚¨å­˜è¯¥ä»»åŠ¡çš„å¥æŸ„, å¯ç½®NULL</li>
</ul>
<p><strong>è¿”å›å€¼:</strong></p>
<ul>
<li>pdPASS: æ ‡å¿—ç€ä»»åŠ¡è¢«æˆåŠŸåˆ›å»º</li>
<li>pdFAIL: è¡¨æ˜æ²¡æœ‰è¶³å¤Ÿçš„å †å†…å­˜åˆ›å»ºä»»åŠ¡</li>
</ul>
<h4 id="ä¸åŒçš„ä»»åŠ¡åˆ›å»ºå‡½æ•°"><a href="#ä¸åŒçš„ä»»åŠ¡åˆ›å»ºå‡½æ•°" class="headerlink" title="ä¸åŒçš„ä»»åŠ¡åˆ›å»ºå‡½æ•°"></a>ä¸åŒçš„ä»»åŠ¡åˆ›å»ºå‡½æ•°</h4><p>ä»å¦å¤–äº”ä¸ªå‡½æ•°ä¸­å¯ä»¥æå–å‡ºè¿™å‡ ä¸ªå…³é”®è¯, <strong>static</strong>, <strong>Restricted</strong>, <strong>AffinitySet</strong></p>
<p>å…¶ä¸­:</p>
<ul>
<li>staticè¡¨ç¤ºä½¿ç”¨é™æ€çš„å†…å­˜, å’Œcè¯­è¨€ä¸­staticä¸€ä¸ªä½œç”¨, ä¸å¤šèµ˜è¿°</li>
<li>restrictedè¡¨ç¤ºåˆ›å»ºçš„ä»»åŠ¡çš„æƒé™å—åˆ°é™åˆ¶, æ— æ³•è®¿é—®ç³»ç»Ÿå†…å­˜</li>
<li>affinityè¡¨ç¤ºå¯ç”¨äºå¤šæ ¸å¤„ç†å™¨çš„ä»»åŠ¡, æ”¯æŒSymmetric Multi Processing(SMP)</li>
</ul>
<h4 id="åˆ›å»ºä»»åŠ¡çš„ä¸åŒå§¿åŠ¿"><a href="#åˆ›å»ºä»»åŠ¡çš„ä¸åŒå§¿åŠ¿" class="headerlink" title="åˆ›å»ºä»»åŠ¡çš„ä¸åŒå§¿åŠ¿"></a>åˆ›å»ºä»»åŠ¡çš„ä¸åŒå§¿åŠ¿</h4><p>ç®€å•çš„åˆ›å»ºå‡ ä¸ªä»»åŠ¡</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">( <span class="type">void</span> )</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * Variables declared here may no longer exist after starting the FreeRTOS</span></span><br><span class="line"><span class="comment">    * scheduler. Do not attempt to access variables declared on the stack used</span></span><br><span class="line"><span class="comment">    * by main() from tasks.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * Create one of the two tasks. Note that a real application should check</span></span><br><span class="line"><span class="comment">    * the return value of the xTaskCreate() call to ensure the task was</span></span><br><span class="line"><span class="comment">    * created successfully.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    xTaskCreate( vTask1, <span class="comment">/* Pointer to the function that implements the task.*/</span></span><br><span class="line">    <span class="string">&quot;Task 1&quot;</span>,<span class="comment">/* Text name for the task. */</span></span><br><span class="line">    <span class="number">1000</span>, <span class="comment">/* Stack depth in words. */</span></span><br><span class="line">    <span class="literal">NULL</span>, <span class="comment">/* This example does not use the task parameter. */</span></span><br><span class="line">    <span class="number">1</span>, <span class="comment">/* This task will run at priority 1. */</span></span><br><span class="line">    <span class="literal">NULL</span> ); <span class="comment">/* This example does not use the task handle. */</span></span><br><span class="line">    <span class="comment">/* Create the other task in exactly the same way and at the same priority.*/</span></span><br><span class="line">    xTaskCreate( vTask2, <span class="string">&quot;Task 2&quot;</span>, <span class="number">1000</span>, <span class="literal">NULL</span>, <span class="number">1</span>, <span class="literal">NULL</span> );</span><br><span class="line">    <span class="comment">/* Start the scheduler so the tasks start executing. */</span></span><br><span class="line">    vTaskStartScheduler();</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * If all is well main() will not reach here because the scheduler will now</span></span><br><span class="line"><span class="comment">    * be running the created tasks. If main() does reach here then there was</span></span><br><span class="line"><span class="comment">    * not enough heap memory to create either the idle or timer tasks</span></span><br><span class="line"><span class="comment">    * (described later in this book). Chapter 3 provides more information on</span></span><br><span class="line"><span class="comment">    * heap memory management.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">for</span>( ;; );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€ä¸ªä»»åŠ¡ä¸æ­¢èƒ½åœ¨<code>main</code>å‡½æ•°é‡Œåˆ›å»º, è¿˜å¯ä»¥åœ¨ä»»åŠ¡ä¹‹ä¸­è¿›è¡Œä»»åŠ¡çš„åˆ›å»º</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">vTask1</span><span class="params">( <span class="type">void</span> * pvParameters )</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *pcTaskName = <span class="string">&quot;Task 1 is running\r\n&quot;</span>;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">long</span> ul; <span class="comment">/* volatile to ensure ul is not optimized away. */</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * If this task code is executing then the scheduler must already have</span></span><br><span class="line"><span class="comment">    * been started. Create the other task before entering the infinite loop.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    xTaskCreate( vTask2, <span class="string">&quot;Task 2&quot;</span>, <span class="number">1000</span>, <span class="literal">NULL</span>, <span class="number">1</span>, <span class="literal">NULL</span> );</span><br><span class="line">    <span class="keyword">for</span>( ;; )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">/* Print out the name of this task. */</span></span><br><span class="line">        vPrintLine( pcTaskName );</span><br><span class="line">        <span class="comment">/* Delay for a period. */</span></span><br><span class="line">        <span class="keyword">for</span>( ul = <span class="number">0</span>; ul &lt; mainDELAY_LOOP_COUNT; ul++ )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">            * This loop is just a very crude delay implementation. There is</span></span><br><span class="line"><span class="comment">            * nothing to do in here. Later examples will replace this crude</span></span><br><span class="line"><span class="comment">            * loop with a proper delay/sleep function.</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ä»»åŠ¡æ¨¡æ¿è¿›è¡Œå®ä¾‹çš„åˆ›å»º</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">vTaskFunction</span><span class="params">( <span class="type">void</span> * pvParameters )</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> *pcTaskName;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">long</span> ul; <span class="comment">/* volatile to ensure ul is not optimized away. */</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * The string to print out is passed in via the parameter. Cast this to a</span></span><br><span class="line"><span class="comment">    * character pointer.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    pcTaskName = ( <span class="type">char</span> * ) pvParameters;</span><br><span class="line">    <span class="comment">/* As per most tasks, this task is implemented in an infinite loop. */</span></span><br><span class="line">    <span class="keyword">for</span>( ;; )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">/* Print out the name of this task. */</span></span><br><span class="line">        vPrintLine( pcTaskName );</span><br><span class="line">        <span class="comment">/* Delay for a period. */</span></span><br><span class="line">        <span class="keyword">for</span>( ul = <span class="number">0</span>; ul &lt; mainDELAY_LOOP_COUNT; ul++ )</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        * This loop is just a very crude delay implementation. There is</span></span><br><span class="line"><span class="comment">        * nothing to do in here. Later exercises will replace this crude</span></span><br><span class="line"><span class="comment">        * loop with a proper delay/sleep function.</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* Define the strings that will be passed in as the task parameters. These are</span></span><br><span class="line"><span class="comment">* defined const and not on the stack used by main() to ensure they remain</span></span><br><span class="line"><span class="comment">* valid when the tasks are executing.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">char</span> * pcTextForTask1 = <span class="string">&quot;Task 1 is running&quot;</span>;</span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">char</span> * pcTextForTask2 = <span class="string">&quot;Task 2 is running&quot;</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">( <span class="type">void</span> )</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * Variables declared here may no longer exist after starting the FreeRTOS</span></span><br><span class="line"><span class="comment">    * scheduler. Do not attempt to access variables declared on the stack used</span></span><br><span class="line"><span class="comment">    * by main() from tasks.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="comment">/* Create one of the two tasks. */</span></span><br><span class="line">    xTaskCreate( vTaskFunction, <span class="comment">/* Pointer to the function that implements the task. */</span></span><br><span class="line">    <span class="string">&quot;Task 1&quot;</span>, <span class="comment">/* Text name for the task. This is to facilitate debugging only. */</span></span><br><span class="line">    <span class="number">1000</span>, <span class="comment">/* Stack depth - small  microcontrollers will use much less stack than this.*/</span></span><br><span class="line">    ( <span class="type">void</span> * ) pcTextForTask1, <span class="comment">/* Pass the text to be printed into the task using the task parameter.*/</span></span><br><span class="line">    <span class="number">1</span>, <span class="comment">/* This task will run at priority 1.*/</span></span><br><span class="line">    <span class="literal">NULL</span> ); <span class="comment">/* The task handle is not used in this example. */</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * Create the other task in exactly the same way. Note this time that</span></span><br><span class="line"><span class="comment">    * multiple tasks are being created from the SAME task implementation</span></span><br><span class="line"><span class="comment">    * (vTaskFunction). Only the value passed in the parameter is different.</span></span><br><span class="line"><span class="comment">    * Two instances of the same task definition are being created.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    xTaskCreate( vTaskFunction,</span><br><span class="line">    <span class="string">&quot;Task 2&quot;</span>,</span><br><span class="line">    <span class="number">1000</span>,</span><br><span class="line">    ( <span class="type">void</span> * ) pcTextForTask2,</span><br><span class="line">    <span class="number">1</span>,</span><br><span class="line">    <span class="literal">NULL</span> );</span><br><span class="line">    <span class="comment">/* Start the scheduler so the tasks start executing. */</span></span><br><span class="line">    vTaskStartScheduler();</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * If all is well main() will not reach here because the scheduler will</span></span><br><span class="line"><span class="comment">    * now be running the created tasks. If main() does reach here then there</span></span><br><span class="line"><span class="comment">    * was not enough heap memory to create either the idle or timer tasks</span></span><br><span class="line"><span class="comment">    * (described later in this book). Chapter 3 provides more information on</span></span><br><span class="line"><span class="comment">    * heap memory management.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">for</span>( ;; )</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å››ç§çŠ¶æ€"><a href="#å››ç§çŠ¶æ€" class="headerlink" title="å››ç§çŠ¶æ€"></a>å››ç§çŠ¶æ€</h3><h4 id="å°±ç»ªæ€å’Œè¿è¡Œæ€"><a href="#å°±ç»ªæ€å’Œè¿è¡Œæ€" class="headerlink" title="å°±ç»ªæ€å’Œè¿è¡Œæ€"></a>å°±ç»ªæ€å’Œè¿è¡Œæ€</h4><p>é‚£ä¹ˆåˆ›å»ºå®Œä¸€ä¸ªä»»åŠ¡ä¹‹å, å…¶é»˜è®¤ä¼šå¤„äº<strong>å°±ç»ªæ€</strong></p>
<p>é‚£ä¹ˆæœ‰äº†<strong>å°±ç»ªæ€</strong>, æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªä»»åŠ¡è‚¯å®šæƒ³è¦è®©ä»–æ‰§è¡Œ, äºæ˜¯æœ‰äº†<strong>è¿è¡Œæ€</strong></p>
<p>è¿è¡Œå®Œæ¯•çš„ä»»åŠ¡å›åˆ°å°±ç»ªæ€, ç„¶åä»å°±ç»ªæ€ä¸­é€‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œ, é‚£ä¹ˆæœ€ç®€å•çš„ä¸€ä¸ªæ¨¡å‹è¯ç”Ÿäº†</p>
<p><img src="/../images/FreeRTOS/0.png" alt="0"></p>
<p>è¿™é‡Œæä¸€å˜´ä¼˜å…ˆçº§, é¡¾åæ€ä¹‰, ä¼˜å…ˆçº§å†³å®šäº†å“ªä¸ªä»»åŠ¡èƒ½å¤Ÿå…ˆæ‰§è¡Œ</p>
<p>ä¸Šæ–‡è¿˜è¯´åˆ°, freertosé€šè¿‡ä¸æ–­åœ°ä¸Šä¸‹æ–‡åˆ‡æ¢è¾¾åˆ°â€ä¼ªâ€å¤šçº¿ç¨‹çš„ç›®çš„</p>
<p>é‚£ä¹ˆåœ¨æ¯æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ—¶å€™éƒ½ä¼šæ ¹æ®ä¼˜å…ˆçº§å†³å®šè°ä¼šè¢«é€‰ä¸­ä¸ºä¸‹ä¸€ä¸ªè¿è¡Œçš„ä»»åŠ¡</p>
<p>è¯•æƒ³ä»¥ä¸‹åœºæ™¯: æˆ‘ä»¬ç°åœ¨æœ‰ä¸¤ä¸ªä¼˜å…ˆçº§ä¸åŒçš„ä»»åŠ¡, è¯·é—®è¿™ä¸¤ä¸ªä»»åŠ¡ä¼šå¦‚ä½•æ‰§è¡Œ?</p>
<p>ç­”æ¡ˆæ˜¾è€Œæ˜“è§, ä½ä¼˜å…ˆçº§çš„ä»»åŠ¡ä¼šè¢«é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡<strong>é¥¿æ­»</strong></p>
<p>é‚£ä¹ˆæˆ‘ä»¬ä¸¤ä¸ªçŠ¶æ€çš„æ¨¡å‹å°±ä¸å¤Ÿç”¨äº†</p>
<p>äºæ˜¯è¯ç”Ÿäº†<strong>é˜»å¡æ€</strong>å’Œ<strong>æŒ‚èµ·æ€</strong></p>
<h4 id="é˜»å¡æ€å’ŒæŒ‚èµ·æ€"><a href="#é˜»å¡æ€å’ŒæŒ‚èµ·æ€" class="headerlink" title="é˜»å¡æ€å’ŒæŒ‚èµ·æ€"></a>é˜»å¡æ€å’ŒæŒ‚èµ·æ€</h4><p>å½“æä¼˜å…ˆçº§çš„ä»»åŠ¡è¿›å…¥é˜»å¡æ€å, é‚£ä¹ˆå°±ç»ªæ€å°±åªå‰©ä¸‹ä½ä¼˜å…ˆçº§çš„ä»»åŠ¡å¯ä»¥æ‰§è¡Œäº†</p>
<p>è¿™æ ·, ä½ä¼˜å…ˆçº§çš„ä»»åŠ¡å°±é¥¿ä¸æ­»äº†</p>
<p><strong>é˜»å¡æ€</strong>åˆ†ä¸ºä¸¤ç§ç±»å‹:</p>
<p><strong>æ—¶é—´(Temporal)äº‹ä»¶</strong>å’Œ<strong>åŒæ­¥(Synchronization)äº‹ä»¶</strong></p>
<p><strong>åŒæ­¥äº‹ä»¶</strong>å¯ç”±FreeRTOS é˜Ÿåˆ—ã€äºŒè¿›åˆ¶ä¿¡å·é‡ã€è®¡æ•°ä¿¡å·é‡ã€äº’æ–¥ä½“ã€é€’å½’äº’æ–¥ä½“ã€äº‹ä»¶ç»„ã€æµç¼“å†²åŒºã€æ¶ˆæ¯ç¼“å†²åŒºå’Œç›´æ¥ä»»åŠ¡é€šçŸ¥äº§ç”Ÿ</p>
<p>ä»»åŠ¡å¯ä»¥é˜»å¡åŒæ­¥äº‹ä»¶å¹¶è®¾ç½®è¶…æ—¶ï¼Œä»è€Œæœ‰æ•ˆåœ°åŒæ—¶é˜»å¡ä¸¤ç§ç±»å‹çš„äº‹ä»¶ã€‚ä¾‹å¦‚ï¼Œä»»åŠ¡å¯ä»¥é€‰æ‹©ç­‰å¾…æœ€å¤š 10 æ¯«ç§’ä»¥ä¾¿æ•°æ®åˆ°è¾¾é˜Ÿåˆ—ã€‚å¦‚æœ 10 æ¯«ç§’å†…æœ‰æ•°æ®åˆ°è¾¾æˆ– 10 æ¯«ç§’åæ²¡æœ‰æ•°æ®åˆ°è¾¾ï¼Œä»»åŠ¡å°†ç¦»å¼€é˜»å¡çŠ¶æ€</p>
<p><strong>æ—¶é—´äº‹ä»¶</strong>ä¼šåœ¨æŒ‡å®šæ—¶é—´åˆ°è¾¾æˆ–è¿‡å»ä¸€å®šæ—¶é—´åå‘ç”Ÿ</p>
<p>å¯¹åº”<code>void vTaskDelay( TickType_t xTicksToDelay )</code>å’Œ</p>
<p><code>void vTaskDelayUntil( TickType_t * pxPreviousWakeTime, TickType_t xTimeIncrement )</code>å‡½æ•°</p>
<p>é€šè¿‡è¿™ä¸¤ä¸ªå‡½æ•°å³å¯è®¾å®šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œçš„é¢‘ç‡</p>
<p>å…¶ä¸­<code>xTicksToDelay </code>å‚æ•°æŒ‡çš„æ˜¯æ‰€éœ€ç­‰å¾…çš„tickæ•°, é€šè¿‡<code>pdMS_TO_TICKS()</code>å‡½æ•°å°†æ¯«ç§’æ•°è½¬æ¢ä¸ºtickæ•°</p>
<p>tickæ•°å’Œmcuçš„é¢‘ç‡æŒ‚é’©, æ‰€ä»¥é€šè¿‡å‡½æ•°å°†æ¯«ç§’æ•°è¿›è¡Œè½¬æ¢å¯ä»¥é¿å…å› é¢‘ç‡æ›´æ”¹å¸¦æ¥çš„é”™è¯¯</p>
<p><code>pxPreviousWakeTime</code>å‚æ•°æŒ‡çš„æ˜¯å½“å‰çš„tickæ•°, <code>xTimeIncrement </code>æŒ‡å®šå¤šå°‘tickäº§ç”Ÿä¸€æ¬¡äº‹ä»¶</p>
<p><code>pxPreviousWakeTime</code>ä»…éœ€æŒ‡å®šä¸€æ¬¡, ä¹‹åä¼šåœ¨å‡½æ•°å†…è‡ªå¢</p>
<p>ä¸¤ä¸ªå‡½æ•°ä¸åŒç‚¹åœ¨äº, å‰è€…æ˜¯ç›¸å¯¹çš„, è€Œåè€…æ˜¯ç»å¯¹çš„</p>
<p>ä½¿ç”¨ç¤ºä¾‹</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">vTaskFunction</span><span class="params">( <span class="type">void</span> * pvParameters )</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> * pcTaskName;</span><br><span class="line">    <span class="type">const</span> TickType_t xDelay250ms = pdMS_TO_TICKS( <span class="number">250</span> );</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * The string to print out is passed in via the parameter. Cast this to a</span></span><br><span class="line"><span class="comment">    * character pointer.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    pcTaskName = ( <span class="type">char</span> * ) pvParameters;</span><br><span class="line">    <span class="comment">/* As per most tasks, this task is implemented in an infinite loop. */</span></span><br><span class="line">    <span class="keyword">for</span>( ;; )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">/* Print out the name of this task. */</span></span><br><span class="line">        vPrintLine( pcTaskName );</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        * Delay for a period. This time a call to vTaskDelay() is used which</span></span><br><span class="line"><span class="comment">        * places the task into the Blocked state until the delay period has</span></span><br><span class="line"><span class="comment">        * expired. The parameter takes a time specified in &#x27;ticks&#x27;, and the</span></span><br><span class="line"><span class="comment">        * pdMS_TO_TICKS() macro is used (where the xDelay250ms constant is</span></span><br><span class="line"><span class="comment">        * declared) to convert 250 milliseconds into an equivalent time in</span></span><br><span class="line"><span class="comment">        * ticks.</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        vTaskDelay( xDelay250ms );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">vTaskFunction</span><span class="params">( <span class="type">void</span> * pvParameters )</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> * pcTaskName;</span><br><span class="line">    TickType_t xLastWakeTime;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * The string to print out is passed in via the parameter. Cast this to a</span></span><br><span class="line"><span class="comment">    * character pointer.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    pcTaskName = ( <span class="type">char</span> * ) pvParameters;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * The xLastWakeTime variable needs to be initialized with the current tick</span></span><br><span class="line"><span class="comment">    * count. Note that this is the only time the variable is written to</span></span><br><span class="line"><span class="comment">    * explicitly. After this xLastWakeTime is automatically updated within</span></span><br><span class="line"><span class="comment">    * vTaskDelayUntil().</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    xLastWakeTime = xTaskGetTickCount();</span><br><span class="line">    <span class="comment">/* As per most tasks, this task is implemented in an infinite loop. */</span></span><br><span class="line">    <span class="keyword">for</span>( ;; )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">/* Print out the name of this task. */</span></span><br><span class="line">        vPrintLine( pcTaskName );</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        * This task should execute every 250 milliseconds exactly. As per</span></span><br><span class="line"><span class="comment">        * the vTaskDelay() function, time is measured in ticks, and the</span></span><br><span class="line"><span class="comment">        * pdMS_TO_TICKS() macro is used to convert milliseconds into ticks.</span></span><br><span class="line"><span class="comment">        * xLastWakeTime is automatically updated within vTaskDelayUntil(), so</span></span><br><span class="line"><span class="comment">        * is not explicitly updated by the task.</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        vTaskDelayUntil( &amp;xLastWakeTime, pdMS_TO_TICKS( <span class="number">250</span> ) );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æŒ‚èµ·æ€</strong></p>
<p>å¤„äºæŒ‚èµ·çŠ¶æ€çš„ä»»åŠ¡ä¸å¯ç”¨äºè°ƒåº¦ç¨‹åºã€‚è¿›å…¥æŒ‚èµ·çŠ¶æ€çš„å”¯ä¸€æ–¹æ³•æ˜¯é€šè¿‡è°ƒç”¨ <code>vTaskSuspend() </code>API å‡½æ•°ï¼Œè€Œé€€å‡ºçŠ¶æ€çš„å”¯ä¸€æ–¹æ³•æ˜¯è°ƒç”¨ <code>vTaskResume() </code>æˆ– <code>xTaskResumeFromISR()</code> API å‡½æ•°ã€‚å¤§å¤šæ•°åº”ç”¨ç¨‹åºä¸ä½¿ç”¨æŒ‚èµ·çŠ¶æ€</p>
<p><img src="/../images/FreeRTOS/1.png" alt="1"></p>
<p>è‡³æ­¤, æ€»ç»“å‡ºå››ç§çŠ¶æ€çš„çŠ¶æ€è½¬æ¢å›¾</p>
<h3 id="åˆ é™¤-Delete-ä¸€ä¸ªä»»åŠ¡"><a href="#åˆ é™¤-Delete-ä¸€ä¸ªä»»åŠ¡" class="headerlink" title="åˆ é™¤(Delete)ä¸€ä¸ªä»»åŠ¡"></a>åˆ é™¤(Delete)ä¸€ä¸ªä»»åŠ¡</h3><p><code>vTaskDelete()</code> API å‡½æ•°åˆ é™¤ä»»åŠ¡ã€‚ä»…å½“ FreeRTOSConfig.h ä¸­çš„ <code>INCLUDE_vTaskDelete</code> è®¾ç½®ä¸º 1 æ—¶ï¼Œ<code>vTaskDelete()</code> API å‡½æ•°æ‰å¯ç”¨</p>
<p><code>void vTaskDelete( TaskHandle_t xTaskToDelete )</code>é€šè¿‡ä¼ é€’ä»»åŠ¡å¥æŸ„çš„æŒ‡é’ˆå®Œæˆåˆ é™¤</p>
<p>å½“ä»»åŠ¡è¢«åˆ é™¤æ—¶ï¼Œåªæœ‰å†…æ ¸æœ¬èº«åˆ†é…ç»™ä»»åŠ¡çš„å†…å­˜æ‰ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾ã€‚å¦‚æœä¸å†éœ€è¦ï¼Œåœ¨ä»»åŠ¡æ‰§è¡ŒæœŸé—´åˆ†é…çš„ä»»ä½•å†…å­˜æˆ–å…¶ä»–èµ„æºéƒ½å¿…é¡»æ˜¾å¼é‡Šæ”¾</p>
<p>å½“ä»»åŠ¡è¢«åˆ é™¤æ—¶, å†…æ ¸æœ¬èº«åˆ†é…ç»™ä»»åŠ¡çš„èµ„æºç”±<strong>ç©ºé—²ä»»åŠ¡</strong>æ¥è¿›è¡Œé‡Šæ”¾</p>
<p>è¿™é‡Œæš‚ä¸”æŠŠç©ºé—²ä»»åŠ¡çœ‹ä½œä¸ºä¸€ä¸ª<strong>æœ€ä½ä¼˜å…ˆçº§çš„</strong>, <strong>åªåœ¨å°±ç»ªæ€åªå­˜åœ¨ç©ºé—²ä»»åŠ¡æ—¶æ‰æ‰§è¡Œ</strong>çš„ä¸€ä¸ªä»»åŠ¡</p>
<p>å› ä¸ºèµ„æºéœ€è¦é€šè¿‡ç©ºé—²ä»»åŠ¡æ¥è¿›è¡Œé‡Šæ”¾, æ‰€ä»¥éœ€è¦<strong>ä¿è¯ç©ºé—²ä»»åŠ¡ä¸è¢«é¥¿æ­»</strong>, ä¹‹åä¼šè¯´æ˜</p>
<h2 id="è°ƒåº¦ç®—æ³•"><a href="#è°ƒåº¦ç®—æ³•" class="headerlink" title="è°ƒåº¦ç®—æ³•"></a>è°ƒåº¦ç®—æ³•</h2><p>FreeRTOSé€šè¿‡è°ƒåº¦å™¨æ¥å†³å®šä»€ä¹ˆæ—¶å€™æ‰§è¡Œä»€ä¹ˆä»»åŠ¡</p>
<h3 id="ä¼˜å…ˆçº§"><a href="#ä¼˜å…ˆçº§" class="headerlink" title="ä¼˜å…ˆçº§"></a>ä¼˜å…ˆçº§</h3><p><strong>FreeRTOSä¿è¯æ€»æ˜¯é€‰æ‹©ä½äºå°±ç»ªæ€çš„æœ€é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡è¿›å…¥è¿è¡Œæ€</strong></p>
<p>é‚£ä¹ˆ<strong>ç›¸åŒä¼˜å…ˆçº§çš„ä»»åŠ¡</strong>å‘¢?</p>
<p>FreeRTOSé‡‡ç”¨<strong>å¾ªç¯è°ƒåº¦</strong>çš„ç®—æ³•, å³åƒä¸€ä¸ªé˜Ÿåˆ—ä¸€æ ·, è¿è¡Œå®Œæ¯•çš„ä»»åŠ¡å›åˆ°é˜Ÿåˆ—æœ«å°¾, ä½äºé˜Ÿåˆ—é¦–çš„ä»»åŠ¡è¢«é€‰ä¸­è¿›å…¥è¿è¡Œæ€</p>
<p>ä¼˜å…ˆçº§çš„æœ€å¤§å€¼ç”±<code>configMAX_PRIORITIES</code>å†³å®š</p>
<p>ä¼˜å…ˆçº§çš„èŒƒå›´ä»0åˆ°<code>configMAX_PRIORITIES - 1</code>, 0å³æœ€ä½ä¼˜å…ˆçº§</p>
<p>å¯¹äºä¼˜å…ˆçº§, æœ‰ä¸¤ç§è°ƒåº¦ç¨‹åºå¯é€‰, åˆ†åˆ«æ˜¯<strong>é€šç”¨è°ƒåº¦(Generic Scheduler)<strong>å’Œ</strong>æ¶æ„ä¼˜åŒ–è°ƒåº¦(Architecture-Optimized Scheduler)</strong></p>
<p><strong>é€šç”¨è°ƒåº¦</strong>æ²¡æœ‰å¯¹<code>configMAX_PRIORITIES</code>æ–½åŠ ä¸Šé™, ä½†ç”±äºæ›´å¤§çš„å€¼æ„å‘³ç€éœ€è¦æ›´å¤šçš„RAMä»¥åŠæ›´é•¿çš„æœ€åæƒ…å†µæ‰§è¡Œæ—¶é—´, æ‰€ä»¥ä¸€èˆ¬æ¥è¯´, å»ºè®®æœ€å°åŒ–<code>configMAX_PRIORITIES</code></p>
<p><strong>æ¶æ„ä¼˜åŒ–è°ƒåº¦</strong>å¯ä»¥æ ¹æ®ä¸åŒçš„æ¶æ„ä¼˜åŒ–<code>configMAX_PRIORITIES</code>çš„å€¼, ä¾‹å¦‚åœ¨32ä½æ¶æ„ä¸Šè¯¥å€¼ä¸º32, 64ä½æ¶æ„ä¸Šè¯¥å€¼ä¸º64</p>
<p>è¦ä½¿ç”¨æ¶æ„ä¼˜åŒ–è°ƒåº¦, åªéœ€è¦åœ¨FreeRTOSConfig.h ä¸­å°† <code>configUSE_PORT_optimized_TASK_SELECTION</code> è®¾ç½®ä¸º 1, ä¸º0åˆ™ä¸ºé€šç”¨è°ƒåº¦</p>
<p>ä½†ä¸æ˜¯æ‰€æœ‰FreeRTOSç«¯å£éƒ½æœ‰æ¶æ„ä¼˜åŒ–çš„å®ç°, å¯ä»¥æ ¹æ®<code>configUSE_PORT_optimized_TASK_SELECTION</code>çš„é»˜è®¤å€¼æ¥åˆ¤æ–­, å¦‚æœä¸º1, åˆ™è¯´æ˜æœ‰, åä¹‹åˆ™æ— </p>
<p><strong>ä¼˜å…ˆçº§ä¸åªèƒ½åœ¨ä»»åŠ¡åˆ›å»ºæ—¶æŒ‡å®š, è¿˜å¯ä»¥åœ¨ç¨‹åºä¸­åŠ¨æ€è¿›è¡Œä¿®æ”¹</strong></p>
<p>å½“ FreeRTOSConfig.h ä¸­çš„ <code>INCLUDE_vTaskPrioritySet</code> è®¾ç½®ä¸º 1 æ—¶</p>
<p>å¯ä»¥ä½¿ç”¨<code>vTaskPrioritySet()</code>åœ¨ç¨‹åºä¸­åŠ¨æ€ä¿®æ”¹ä»»åŠ¡çš„ä¼˜å…ˆçº§</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">vTaskPrioritySet</span><span class="params">( TaskHandle_t xTask,</span></span><br><span class="line"><span class="params">UBaseType_t uxNewPriority )</span>;</span><br></pre></td></tr></table></figure>

<p>å½“ FreeRTOSConfig.h ä¸­çš„ <code>INCLUDE_uxTaskPriorityGet</code> è®¾ç½®ä¸º 1 æ—¶</p>
<p>è¿˜å¯ä»¥ä½¿ç”¨<code>uxTaskPriorityGet()</code>åŠ¨æ€è·å–ä»»åŠ¡çš„ä¼˜å…ˆçº§</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UBaseType_t <span class="title function_">uxTaskPriorityGet</span><span class="params">( TaskHandle_t xTask )</span>;</span><br></pre></td></tr></table></figure>

<h3 id="ç©ºé—²ä»»åŠ¡"><a href="#ç©ºé—²ä»»åŠ¡" class="headerlink" title="ç©ºé—²ä»»åŠ¡"></a>ç©ºé—²ä»»åŠ¡</h3><p>ç©ºé—²ä»»åŠ¡, é¡¾åæ€ä¹‰, å°±æ˜¯åœ¨æ²¡æœ‰ä»»åŠ¡å¯ä»¥æ‰§è¡Œæ—¶ æ‰§è¡Œçš„ä»»åŠ¡</p>
<p>å…¶ä½œç”¨ä¸»è¦æ˜¯èµ·å ä½ç¬¦ä½œç”¨, å› ä¸ºFreeRTOSéœ€è¦ä¿è¯åœ¨ä»»ä½•æ—¶åˆ»éƒ½æœ‰ä»»åŠ¡å¯ä»¥è¿›å…¥è¿è¡Œæ€</p>
<p>ä»–çš„<strong>ä¼˜å…ˆçº§ä¸ºæœ€ä½çš„0</strong>, ä¿è¯äº†ä¸ä¼šå› ä¼˜å…ˆçº§æ›´å¤§è€Œé˜»ç¢åˆ«çš„ä»»åŠ¡</p>
<p>ç©ºé—²ä»»åŠ¡è¿˜æœ‰ä¸€ä¸ªä½œç”¨å°±æ˜¯<strong>æ¸…é™¤ç”±<code>vTaskDelete() </code>å‡½æ•°æ®‹ç•™çš„å†…æ ¸èµ„æº</strong></p>
<p>è™½ç„¶ç©ºé—²ä»»åŠ¡çš„ä¼˜å…ˆçº§ä¸ºæœ€ä½çš„0, ä½†ä¹Ÿå¯èƒ½å­˜åœ¨ç›¸åŒçš„, ä¼˜å…ˆçº§ä¸º0çš„ä»»åŠ¡, è¿™æ—¶, æˆ‘ä»¬è‚¯å®šä¸æƒ³ç©ºé—²ä»»åŠ¡å’Œæˆ‘ä»¬çš„ä»»åŠ¡æŠ¢å¤ºè¿è¡Œæ—¶é—´</p>
<p>FreeRTOSConfig.h ä¸­çš„ <code>configIDLE_SHOULD_YIELD</code>å†³å®šç©ºé—²ä»»åŠ¡æ˜¯å¦ä¼šå’Œå…¶ä»–0ä¼˜å…ˆçº§ä»»åŠ¡æŠ¢å¤ºè¿è¡Œæ—¶é—´</p>
<p>å½“<code>configIDLE_SHOULD_YIELD</code>ç½®0æ—¶, ç©ºé—²ä»»åŠ¡å’Œå…¶ä»–ä»»åŠ¡ä¸€æ ·, éµå¾ª<strong>å¾ªç¯è°ƒåº¦</strong>çš„ç®—æ³•</p>
<p>å½“<code>configIDLE_SHOULD_YIELD</code>ç½®1æ—¶, å½“æœ‰å…¶ä»–0ä¼˜å…ˆçº§ä»»åŠ¡å¤„äºå°±ç»ªæ€æ—¶, ç©ºé—²ä»»åŠ¡å°†åœ¨æ¯æ¬¡è¿­ä»£ä¸­è®©æ­¥, å°†è¿è¡Œæ—¶é—´è®©ç»™å…¶ä»–ä»»åŠ¡</p>
<p><img src="/../images/FreeRTOS/2.png" alt="2"></p>
<p>åœ¨æ¯æ¬¡è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢æ—¶(è¿™é‡Œæ¯ä¸ªé—´éš”ç§°ä¸ºä¸€ä¸ªæ—¶é—´ç‰‡, æ¯ä¸ªäº‹ä»¶ç‰‡çš„æœ«å°¾æ‰§è¡Œä¸€æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢), å…ˆæ˜¯ç”±å¾ªç¯è°ƒåº¦è¿è¡Œç©ºé—²ä»»åŠ¡, æ­¤æ—¶ç©ºé—²ä»»åŠ¡å‘ç°å°±ç»ªæ€è¿˜æœ‰å…¶ä»–0ä¼˜å…ˆçº§çš„ä»»åŠ¡, äºæ˜¯ä¸»åŠ¨è®©å‡ºè¯¥æ—¶é—´ç‰‡çš„å‰©ä½™æ—¶é—´.</p>
<p>t6åˆ°t7æ—¶é—´æ®µè¿˜æ­ç¤ºäº†é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡æ˜¯å¦‚ä½•æŠ¢å ä½ä¼˜å…ˆçº§çš„ä»»åŠ¡çš„(è¯¦è§åæ–‡)</p>
<p>ç©ºé—²ä»»åŠ¡æ˜¯å¯ä»¥é€šè¿‡é’©å­å‡½æ•°è¿›è¡Œhookçš„</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">vApplicationIdleHook</span><span class="params">( <span class="type">void</span> )</span>;</span><br></pre></td></tr></table></figure>

<p>ç©ºé—²ä»»åŠ¡æŒ‚é’©çš„å¸¸è§ç”¨é€”åŒ…æ‹¬ï¼š </p>
<p><strong>æ‰§è¡Œä½ä¼˜å…ˆçº§ã€åå°æˆ–è¿ç»­å¤„ç†åŠŸèƒ½ï¼Œè€Œæ— éœ€ä¸ºæ­¤ç›®çš„åˆ›å»ºåº”ç”¨ç¨‹åºä»»åŠ¡è€Œäº§ç”Ÿ RAM å¼€é”€ã€‚</strong></p>
<p><strong>æµ‹é‡ç©ºé—²å¤„ç†èƒ½åŠ›çš„é‡ã€‚</strong> ï¼ˆåªæœ‰å½“æ‰€æœ‰è¾ƒé«˜ä¼˜å…ˆçº§çš„åº”ç”¨ç¨‹åºä»»åŠ¡éƒ½æ²¡æœ‰è¦æ‰§è¡Œçš„å·¥ä½œæ—¶ï¼Œç©ºé—²ä»»åŠ¡æ‰ä¼šè¿è¡Œï¼›å› æ­¤ï¼Œæµ‹é‡åˆ†é…ç»™ç©ºé—²ä»»åŠ¡çš„å¤„ç†æ—¶é—´é‡å¯ä»¥æ¸…æ¥šåœ°æŒ‡ç¤ºç©ºé—²å¤„ç†æ—¶é—´ã€‚ï¼‰</p>
<p><strong>å°†å¤„ç†å™¨ç½®äºä½åŠŸè€—æ¨¡å¼</strong>ï¼Œåœ¨æ²¡æœ‰è¦æ‰§è¡Œçš„åº”ç”¨ç¨‹åºå¤„ç†æ—¶æä¾›ä¸€ç§ç®€å•ä¸”è‡ªåŠ¨çš„èŠ‚èƒ½æ–¹æ³•ï¼ˆå°½ç®¡å¯å®ç°çš„èŠ‚èƒ½æ•ˆæœä½äºæ— æ»´ç­”ç©ºé—²æ¨¡å¼æ‰€å®ç°çš„èŠ‚èƒ½æ•ˆæœï¼‰ã€‚</p>
<p>ç©ºé—²ä»»åŠ¡æŒ‚é’©å‡½æ•°å¿…é¡»éµå®ˆä»¥ä¸‹è§„åˆ™:</p>
<p><strong>ç©ºé—²ä»»åŠ¡æŒ‚é’©å‡½æ•°ç»ä¸èƒ½å°è¯•é˜»æ­¢æˆ–æŒ‚èµ·è‡ªèº«ã€‚</strong></p>
<p>æ³¨æ„ï¼š**ä»¥ä»»ä½•æ–¹å¼é˜»æ­¢ç©ºé—²ä»»åŠ¡éƒ½å¯èƒ½å¯¼è‡´æ²¡æœ‰ä»»åŠ¡å¯è¿›å…¥è¿è¡ŒçŠ¶æ€çš„æƒ…å†µã€‚**å¦‚æœåº”ç”¨ç¨‹åºä»»åŠ¡ä½¿ç”¨ vTaskDelete() API å‡½æ•°åˆ é™¤è‡ªèº«ï¼Œåˆ™ç©ºé—²ä»»åŠ¡æŒ‚é’©å¿…é¡»å§‹ç»ˆåœ¨åˆç†çš„æ—¶é—´æ®µå†…è¿”å›åˆ°å…¶è°ƒç”¨è€…ã€‚è¿™æ˜¯å› ä¸ºç©ºé—²ä»»åŠ¡è´Ÿè´£æ¸…ç†åˆ†é…ç»™åˆ é™¤è‡ªèº«çš„ä»»åŠ¡çš„å†…æ ¸èµ„æºã€‚å¦‚æœç©ºé—²ä»»åŠ¡æ°¸ä¹…ä¿ç•™åœ¨ç©ºé—²æŒ‚é’©å‡½æ•°ä¸­ï¼Œåˆ™æ— æ³•è¿›è¡Œæ­¤æ¸…ç†</p>
<h3 id="æ—¶é—´ç‰‡-æŠ¢å å¼ä¸åä½œå¼"><a href="#æ—¶é—´ç‰‡-æŠ¢å å¼ä¸åä½œå¼" class="headerlink" title="æ—¶é—´ç‰‡, æŠ¢å å¼ä¸åä½œå¼"></a>æ—¶é—´ç‰‡, æŠ¢å å¼ä¸åä½œå¼</h3><h4 id="æ—¶é—´ç‰‡"><a href="#æ—¶é—´ç‰‡" class="headerlink" title="æ—¶é—´ç‰‡"></a>æ—¶é—´ç‰‡</h4><p>è¯•æƒ³å½“æœ‰ä¸¤ä¸ªä¼˜å…ˆçº§ç›¸åŒçš„, è¿ç»­è¿è¡Œ(ä¸ä¼šè¿›å…¥é˜»å¡æ€)çš„ä»»åŠ¡, å¦‚æœæ­£åœ¨è¿è¡Œä¸­çš„é‚£ä¸€ä¸ªä»»åŠ¡ä¸€ç›´ä¸ä¸»åŠ¨é€€å‡ºçš„è¯, é‚£å¦ä¸€ä¸ªä»»åŠ¡å°†ä¼šè¢«é¥¿æ­»</p>
<p>å¦‚ä½•ä½¿ä¸¤ä¸ªåŒçº§çš„ä»»åŠ¡â€åŒæ—¶â€æ‰§è¡Œå‘¢?</p>
<p>äºæ˜¯æœ‰äº†<strong>æ—¶é—´ç‰‡(time slice)</strong></p>
<p>æ—¶é—´ç‰‡æ˜¯ä¸€æ®µæ—¶é—´, åœ¨ä¸€æ®µæ—¶é—´å, å³æ—¶é—´ç‰‡çš„æœ«å°¾, è°ƒç”¨ä¸€æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢, é€šè¿‡å¾ªç¯è°ƒåº¦, ä½¿å°±ç»ªæ€ä¸­çš„ä»»åŠ¡è¿›å…¥è¿è¡Œæ€</p>
<p>æ—¶é—´ç‰‡çš„é•¿åº¦ç”±<code>configTICK_RATE_HZ</code>å†³å®š, <code>configTICK_RATE_HZ</code>è¢«è®¾ç½®ä¸º100Hzæ—¶, æŒ‡ä¸€ä¸ªæ—¶é—´ç‰‡ä¸º1 &#x2F; 100(s), å³10ms</p>
<p><code>configTICK_RATE_HZ</code> çš„æœ€ä½³å€¼å–å†³äºåº”ç”¨ç¨‹åºï¼Œä½†å…¸å‹å€¼ä¸º 100</p>
<p><img src="/../images/FreeRTOS/3.png" alt="3"></p>
<h4 id="æŠ¢å å¼è°ƒåº¦"><a href="#æŠ¢å å¼è°ƒåº¦" class="headerlink" title="æŠ¢å å¼è°ƒåº¦"></a>æŠ¢å å¼è°ƒåº¦</h4><p>æŠ¢å å¼å³é«˜ä¼˜å…ˆçº§ä¼šç›´æ¥æ‰“æ–­ä½ä¼˜å…ˆçº§ä»»åŠ¡çš„æ‰§è¡Œ, ä¸Šæ–‡é»˜è®¤æ˜¯ä½¿ç”¨çš„æŠ¢å å¼ç®—æ³•</p>
<p>é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡é€šå¸¸æ ‡å¿—ç€ ç´§æ€¥, é‡è¦</p>
<p>å› æ­¤éœ€è¦ä¿è¯é«˜ä¼˜å…ˆçº§ä»»åŠ¡ä» è¿›å…¥å°±ç»ªæ€ åˆ° ä»å°±ç»ªæ€è¿›å…¥è¿è¡Œæ€ çš„æ—¶é—´</p>
<p>ä»»åŠ¡çš„æŠ¢å æ˜¯å¯ä»¥åµŒå¥—çš„, è¿™æ„å‘³ç€åœ¨ä½ä¼˜å…ˆçº§ä»»åŠ¡è¢«é«˜ä¼˜å…ˆçº§ä»»åŠ¡æŠ¢å æ—¶å€™, é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡æ˜¯å¯ä»¥è¢«æ›´é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡æ‰€æŠ¢å </p>
<p>å³ä½¿é‡åˆ°æ—¶é—´ç‰‡ç»“æŸæ—¶çš„<strong>ä¸Šä¸‹æ–‡åˆ‡æ¢</strong>, ä¸‹ä¸€ä¸ªæ—¶é—´ç‰‡ä»ç„¶ä¼šæ‰§è¡Œæ›´é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡, å› ä¸ºæ­¤æ—¶å°±ç»ªæ€ä¸­æœ€é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ä»ç„¶æ˜¯ä»–è‡ªå·±</p>
<h4 id="ä¸‰ç§è°ƒåº¦ç®—æ³•"><a href="#ä¸‰ç§è°ƒåº¦ç®—æ³•" class="headerlink" title="ä¸‰ç§è°ƒåº¦ç®—æ³•"></a>ä¸‰ç§è°ƒåº¦ç®—æ³•</h4><p>æ˜¯å¦ä½¿ç”¨æ—¶é—´ç‰‡ä»¥åŠæ˜¯å¦ä½¿ç”¨æŠ¢å å¼è°ƒåº¦å¯ä»¥é€šè¿‡FreeRTOSConfig.hä¸­<code>configUSE_PREEMPTION</code> å’Œ <code>configUSE_TIME_SLICING</code>çš„å€¼è¿›è¡Œé…ç½®</p>
<p>ç¬¬ä¸‰ä¸ªé…ç½®å¸¸é‡ <code>configUSE_TICKLESS_IDLE</code> ä¹Ÿä¼šå½±å“è°ƒåº¦ç®—æ³•, ä»–å†³å®šäº†æ—¶é—´ç‰‡æœ«å°¾çš„ä¸Šä¸‹æ–‡åˆ‡æ¢è¯·æ±‚åœ¨ç©ºé—²æ—¶æ˜¯å¦ä¼šå…³é—­ ä»¥æœ€å¤§é™åº¦åœ°é™ä½åŠŸè€—, é»˜è®¤ä¸º0(å…³é—­)</p>
<p><code>configUSE_PREEMPTION</code> å’Œ <code>configUSE_TIME_SLICING</code>çš„ä¸åŒé…ç½®å†³å®šäº†ç¨‹åºä½¿ç”¨å“ªä¸€ç§è°ƒåº¦ç®—æ³•</p>
<p><img src="/../images/FreeRTOS/4.png" alt="4"></p>
<p><strong>å¸¦æœ‰æ—¶é—´åˆ‡ç‰‡çš„å›ºå®šä¼˜å…ˆçº§æŠ¢å å¼è°ƒåº¦(Prioritized Preemptive Scheduling with Time Slicing)</strong></p>
<p><img src="/../images/FreeRTOS/5.png" alt="5"></p>
<p>æœ€ä¸ºå¸¸è§çš„ä¸€ç§ç®—æ³•</p>
<p>*<strong>æ— æ—¶é—´åˆ†ç‰‡çš„ä¼˜å…ˆæŠ¢å å¼è°ƒåº¦(Prioritized Preemptive Scheduling without Time Slicing)</strong></p>
<p><img src="/../images/FreeRTOS/6.png" alt="6"></p>
<p>ç”±äºæ²¡æœ‰æ—¶é—´ç‰‡æä¾›çš„å®šæœŸçš„ä¸Šä¸‹æ–‡åˆ‡æ¢, å¯¼è‡´ç©ºé—²ä»»åŠ¡ä¸€ç›´å ç€cpuå¯¼è‡´ä»»åŠ¡2æ‰§è¡Œæ—¶é—´è¿œå°äºç©ºé—²ä»»åŠ¡(<code>configIDLE_SHOULD_YIELD</code>ä¸º0çš„æƒ…å†µ)</p>
<p><strong>ååŒè°ƒåº¦(Cooperative Scheduling)</strong></p>
<p><img src="/../images/FreeRTOS/7.png" alt="7"></p>
<p>ååŒè°ƒåº¦ç®—æ³•ä¸‹çš„ä»»åŠ¡åªæœ‰åœ¨ä¸€ä¸ªä»»åŠ¡è¿è¡Œç»“æŸæ—¶æ‰ä¼šè¿›è¡Œåˆ‡æ¢</p>
<p>å¯ç”¨äºæ•°æ®ä¼ è¾“çš„æƒ…å†µ</p>
<p>ä¾‹å¦‚ä»»åŠ¡1å°†è¦å‘é€â€™abcdefgâ€™</p>
<p>ä»»åŠ¡2å°†è¦å‘é€â€™1234567890â€™</p>
<p>æˆ‘ä»¬è‚¯å®šä¸æƒ³åœ¨ä»»åŠ¡2å‘é€æœŸé—´è¢«ä»»åŠ¡1æŠ¢å ä½¿å¾—å‘é€å‡ºçš„æ•°æ®è¢«ç ´å</p>
<p>ä½†è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥‡æ€ªçš„ä¾‹å­, ä½¿ç”¨æ— æ—¶é—´åˆ†ç‰‡çš„ä¼˜å…ˆæŠ¢å å¼è°ƒåº¦, ç„¶åå°†ä¸¤è€…çš„ä»»åŠ¡ä¼˜å…ˆçº§ç½®ä¸ºç›¸åŒ ä¹Ÿå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜, ä½†è¿™æ ·å¿…é¡»é™åˆ¶å‘é€æ•°æ®çš„ä»»åŠ¡ä¸ºç›¸åŒä¼˜å…ˆçº§</p>
<h2 id="TLSä¸å¯é‡å…¥"><a href="#TLSä¸å¯é‡å…¥" class="headerlink" title="TLSä¸å¯é‡å…¥"></a>TLSä¸å¯é‡å…¥</h2><p><em>æŠ„å½•</em></p>
<p>çº¿ç¨‹æœ¬åœ°å­˜å‚¨(TLS)å…è®¸åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜åœ¨æ¯ä¸ªä»»åŠ¡çš„ä»»åŠ¡æ§åˆ¶å—ä¸­å­˜å‚¨ä»»æ„æ•°æ®ã€‚æ­¤åŠŸèƒ½æœ€å¸¸ç”¨äºå­˜å‚¨é€šå¸¸ç”±ä¸å¯é‡å…¥å‡½æ•°å­˜å‚¨åœ¨å…¨å±€å˜é‡ä¸­çš„æ•°æ®ã€‚å¯é‡å…¥å‡½æ•°æ˜¯å¯ä»¥ä»å¤šä¸ªçº¿ç¨‹å®‰å…¨è¿è¡Œè€Œæ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨çš„å‡½æ•°ã€‚å½“åœ¨æ²¡æœ‰çº¿ç¨‹æœ¬åœ°å­˜å‚¨çš„å¤šçº¿ç¨‹ç¯å¢ƒä¸­ä½¿ç”¨ä¸å¯é‡å…¥å‡½æ•°æ—¶ï¼Œå¿…é¡»ç‰¹åˆ«æ³¨æ„æ£€æŸ¥ä¸´ç•ŒåŒºå†…è¿™äº›å‡½æ•°è°ƒç”¨çš„å¸¦å¤–ç»“æœã€‚è¿‡åº¦ä½¿ç”¨ä¸´ç•ŒåŒºä¼šé™ä½ RTOS æ€§èƒ½ï¼Œå› æ­¤çº¿ç¨‹æœ¬åœ°å­˜å‚¨é€šå¸¸ä¼˜äºä½¿ç”¨ä¸´ç•ŒåŒºã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œçº¿ç¨‹æœ¬åœ°å­˜å‚¨æœ€å¸¸è§çš„ç”¨é€”æ˜¯ C æ ‡å‡†åº“å’Œ POSIX ç³»ç»Ÿä½¿ç”¨çš„ ISO C æ ‡å‡†ä¸­ä½¿ç”¨çš„ errno å…¨å±€å˜é‡ã€‚ errno å…¨å±€ç”¨äºä¸ºå¸¸è§æ ‡å‡†åº“å‡½æ•°ï¼ˆä¾‹å¦‚ strtof å’Œ strtolï¼‰æä¾›æ‰©å±•ç»“æœæˆ–é”™è¯¯ä»£ç </p>
<p>å¤§å¤šæ•°åµŒå…¥å¼ libc å®ç°éƒ½æä¾› API ä»¥ç¡®ä¿ä¸å¯é‡å…¥å‡½æ•°å¯ä»¥åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­æ­£å¸¸å·¥ä½œã€‚ FreeRTOS æ”¯æŒä¸¤ä¸ªå¸¸ç”¨å¼€æºåº“çš„é‡å…¥ APIï¼šnewlib å’Œ picolibcã€‚è¿™äº›é¢„æ„å»ºçš„ C è¿è¡Œæ—¶çº¿ç¨‹æœ¬åœ°å­˜å‚¨å®ç°å¯ä»¥é€šè¿‡åœ¨å…¶é¡¹ç›®çš„ FreeRTOSConfig.h æ–‡ä»¶ä¸­å®šä¹‰ä¸‹é¢åˆ—å‡ºçš„ç›¸åº”å®æ¥å¯ç”¨</p>
<p>åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜å¯ä»¥é€šè¿‡åœ¨ FreeRTOSConfig.h æ–‡ä»¶ä¸­å®šä¹‰ä»¥ä¸‹å®æ¥å®ç°çº¿ç¨‹æœ¬åœ°å­˜å‚¨ï¼š å°† configUSE_C_RUNTIME_TLS_SUPPORT å®šä¹‰ä¸º 1 ä»¥å¯ç”¨ C è¿è¡Œæ—¶çº¿ç¨‹æœ¬åœ°å­˜å‚¨æ”¯æŒã€‚å°† configTLS_BLOCK_TYPE å®šä¹‰ä¸º c ç±»å‹ï¼Œè¯¥ç±»å‹åº”ç”¨äºå­˜å‚¨ C è¿è¡Œæ—¶çº¿ç¨‹æœ¬åœ°å­˜å‚¨æ•°æ®ã€‚å°† configINIT_TLS_BLOCK å®šä¹‰ä¸ºåˆå§‹åŒ– C è¿è¡Œæ—¶çº¿ç¨‹æœ¬åœ°å­˜å‚¨å—æ—¶åº”è¿è¡Œçš„ C ä»£ç ã€‚å°† configSET_TLS_BLOCK å®šä¹‰ä¸ºåˆ‡æ¢æ–°ä»»åŠ¡æ—¶åº”è¿è¡Œçš„ c ä»£ç  å°† configDEINIT_TLS_BLOCK å®šä¹‰ä¸ºåœ¨å–æ¶ˆåˆå§‹åŒ– C è¿è¡Œæ—¶çº¿ç¨‹æœ¬åœ°å­˜å‚¨å—æ—¶åº”è¿è¡Œçš„ c ä»£ç </p>
<h2 id="ä¸Šä¸‹æ–‡åˆ‡æ¢åŸç†"><a href="#ä¸Šä¸‹æ–‡åˆ‡æ¢åŸç†" class="headerlink" title="ä¸Šä¸‹æ–‡åˆ‡æ¢åŸç†"></a>ä¸Šä¸‹æ–‡åˆ‡æ¢åŸç†</h2><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/115382535">FreeRTOS ä»å…¥é—¨åˆ°ç²¾é€š5â€“ä»»åŠ¡ç®¡ç†è¿™ä»¶äº‹ï¼ˆä¸Šï¼‰</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/127953272">FreeRTOS ä»å…¥é—¨åˆ°ç²¾é€š6â€“ä»»åŠ¡ç®¡ç†è¿™ä»¶äº‹ï¼ˆä¸‹ï¼‰ï¼ˆå¯¹æ¯”PLCï¼Œå®‰å“ï¼‰</a></p>
<p><strong>Mastering-the-FreeRTOS-Real-Time-Kernel.v1.1.0 (Richard Barry -and- The FreeRTOS Team)</strong></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag"># å­¦ä¹ ç¬”è®°</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2025/11/28/HAL%E5%BA%93/" rel="prev" title="HALåº“å­¦ä¹ éšç¬”">
      <i class="fa fa-chevron-left"></i> HALåº“å­¦ä¹ éšç¬”
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E4%BB%BB%E5%8A%A1"><span class="nav-number">1.</span> <span class="nav-text">ä»€ä¹ˆæ˜¯ä»»åŠ¡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%BB%E5%8A%A1%E7%9A%84%E7%8A%B6%E6%80%81%E6%9C%BA%E5%8F%8A%E5%85%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">2.</span> <span class="nav-text">ä»»åŠ¡çš„çŠ¶æ€æœºåŠå…¶ç”Ÿå‘½å‘¨æœŸ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E4%BB%BB%E5%8A%A1"><span class="nav-number">2.1.</span> <span class="nav-text">å¦‚ä½•åˆ›å»ºä¸€ä¸ªä»»åŠ¡</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E5%8F%8A%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="nav-number">2.1.1.</span> <span class="nav-text">å‡½æ•°å‚æ•°åŠè¿”å›å€¼</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8D%E5%90%8C%E7%9A%84%E4%BB%BB%E5%8A%A1%E5%88%9B%E5%BB%BA%E5%87%BD%E6%95%B0"><span class="nav-number">2.1.2.</span> <span class="nav-text">ä¸åŒçš„ä»»åŠ¡åˆ›å»ºå‡½æ•°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E4%BB%BB%E5%8A%A1%E7%9A%84%E4%B8%8D%E5%90%8C%E5%A7%BF%E5%8A%BF"><span class="nav-number">2.1.3.</span> <span class="nav-text">åˆ›å»ºä»»åŠ¡çš„ä¸åŒå§¿åŠ¿</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%9B%E7%A7%8D%E7%8A%B6%E6%80%81"><span class="nav-number">2.2.</span> <span class="nav-text">å››ç§çŠ¶æ€</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B0%B1%E7%BB%AA%E6%80%81%E5%92%8C%E8%BF%90%E8%A1%8C%E6%80%81"><span class="nav-number">2.2.1.</span> <span class="nav-text">å°±ç»ªæ€å’Œè¿è¡Œæ€</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%98%BB%E5%A1%9E%E6%80%81%E5%92%8C%E6%8C%82%E8%B5%B7%E6%80%81"><span class="nav-number">2.2.2.</span> <span class="nav-text">é˜»å¡æ€å’ŒæŒ‚èµ·æ€</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4-Delete-%E4%B8%80%E4%B8%AA%E4%BB%BB%E5%8A%A1"><span class="nav-number">2.3.</span> <span class="nav-text">åˆ é™¤(Delete)ä¸€ä¸ªä»»åŠ¡</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95"><span class="nav-number">3.</span> <span class="nav-text">è°ƒåº¦ç®—æ³•</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BC%98%E5%85%88%E7%BA%A7"><span class="nav-number">3.1.</span> <span class="nav-text">ä¼˜å…ˆçº§</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A9%BA%E9%97%B2%E4%BB%BB%E5%8A%A1"><span class="nav-number">3.2.</span> <span class="nav-text">ç©ºé—²ä»»åŠ¡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%B6%E9%97%B4%E7%89%87-%E6%8A%A2%E5%8D%A0%E5%BC%8F%E4%B8%8E%E5%8D%8F%E4%BD%9C%E5%BC%8F"><span class="nav-number">3.3.</span> <span class="nav-text">æ—¶é—´ç‰‡, æŠ¢å å¼ä¸åä½œå¼</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%97%B6%E9%97%B4%E7%89%87"><span class="nav-number">3.3.1.</span> <span class="nav-text">æ—¶é—´ç‰‡</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8A%A2%E5%8D%A0%E5%BC%8F%E8%B0%83%E5%BA%A6"><span class="nav-number">3.3.2.</span> <span class="nav-text">æŠ¢å å¼è°ƒåº¦</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%89%E7%A7%8D%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95"><span class="nav-number">3.3.3.</span> <span class="nav-text">ä¸‰ç§è°ƒåº¦ç®—æ³•</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TLS%E4%B8%8E%E5%8F%AF%E9%87%8D%E5%85%A5"><span class="nav-number">4.</span> <span class="nav-text">TLSä¸å¯é‡å…¥</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%E5%8E%9F%E7%90%86"><span class="nav-number">5.</span> <span class="nav-text">ä¸Šä¸‹æ–‡åˆ‡æ¢åŸç†</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3"><span class="nav-number">6.</span> <span class="nav-text">å‚è€ƒæ–‡æ¡£</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Sn0r1ax"
      src="/uploads/avatar.png">
  <p class="site-author-name" itemprop="name">Sn0r1ax</p>
  <div class="site-description" itemprop="description">ğŸ˜˜ğŸ˜˜ğŸ˜˜</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">30</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/PMexeggcute" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;PMexeggcute" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sn0r1ax</span>
</div>

<!-- <br /> --> <!-- ç½‘ç«™è¿è¡Œæ—¶é—´çš„è®¾ç½® --> <span id="timeDate">è½½å…¥å¤©æ•°...</span> <!-- <span id="times">è½½å…¥æ—¶åˆ†ç§’...</span> --> <script>   var now = new Date();   function createtime() {     var grt= new Date("11/17/2022 8:00:00");//æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´     now.setTime(now.getTime()+250);     days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);     hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);     if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);     mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}     seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);     snum = Math.round(seconds);      if(String(snum).length ==1 ){snum = "0" + snum;}     // var times = document.getElementById("times").innerHTML = hnum + " å°æ—¶ " + mnum + " åˆ† " + snum + " ç§’";     document.getElementById("timeDate").innerHTML = "æœ¬ç«™å·²å®‰å…¨è¿è¡Œ "+dnum+" å¤© "+hnum + " å°æ—¶ " + mnum + " åˆ† " + snum + " ç§’";   } setInterval("createtime()",250); </script>

<!-- <br /> -->
<!-- ç½‘ç«™è¿è¡Œæ—¶é—´çš„è®¾ç½® -->
<span id="timeDate">...</span>
<!-- <span id="times">è½½å…¥æ—¶åˆ†ç§’...</span> -->
<script>
 Â   var now = new Date();
 Â   function createtime() {
 Â  Â  Â   var grt= new Date("3/10/2025 8:00:00");//æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´
 Â  Â  Â   now.setTime(now.getTime()+250);
 Â  Â  Â   days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
 Â  Â  Â   hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
 Â  Â  Â   if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
 Â  Â  Â   mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
 Â  Â  Â   seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
 Â  Â  Â   snum = Math.round(seconds); 
 Â  Â  Â   if(String(snum).length ==1 ){snum = "0" + snum;}
 Â  Â  Â   // var times = document.getElementById("times").innerHTML = hnum + " å°æ—¶ " + mnum + " åˆ† " + snum + " ç§’";
 Â  Â  Â   document.getElementById("timeDate").innerHTML = "æœ¬ç«™å·²å®‰å…¨è¿è¡Œ "+dnum+" å¤© "+hnum + " å°æ—¶ " + mnum + " åˆ† " + snum + " ç§’";
 Â   }
setInterval("createtime()",250);
</script>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : 'Ov23liG9WrAtML5LeX5q',
      clientSecret: '1bec862c217175f2d9cd423957b67f1ec1fec6ab',
      repo        : 'MyBlogGitalk',
      owner       : 'PMexeggcute',
      admin       : ['PMexeggcute'],
      id          : '924a03254aa2b9ed0eadb4e6b27c9b48',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

</body>
</html>
